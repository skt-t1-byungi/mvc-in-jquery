# MVC in JQuery

3가지 예제 (카운터, 할일목록, 다중 할일목록)를 제이쿼리를 사용해 일반적인 방법으로 만들어 봅니다. 또, 이번에는 다른 프레임워크의 도입없이 모델과 뷰를 분리하는 방법으로 작성합니다. (사실 컨트롤러는 없습니다) 서로 간의 장,단점을 비교합니다.

### 예제실행
```sh
git clone https://github.com/skt-t1-byungi/mvc-in-jquery.git
npm i
npm run watch
```

## 예제별 모델, 뷰 분리 방법.

1. [카운터](#counter-mvc)
2. [할일목록](#todos-mvc)
2. [다중 할일목록](#multiple-todos-mvc)

### 1. 카운터 <a href="#counter-mvc" id="counter-mvc">#</a>
1. 기존 코드를 데이터 변경 함수과 렌더링 함수로 나눕니다.
2. 데이터 변경 후 렌더링 함수를 실행합니다. 
3. 데이터 변경 내용에 따라 렌더링 함수는 여러 개 일 수 있습니다.

### 2. 할일목록 <a href="#todos-mvc" id="todos-mvc">#</a>
1. 기존 코드를 모델(데이터) 클래스와 렌더링 클래스로 분리합니다.
2. 모델은 이벤트 에미터를 상속받아 관찰가능한 상태로 만듭니다.
3. 뷰의 이벤트가 모델을 변경하면 모델을 관찰하는 모든 뷰가 렌더링을 다시하도록 합니다.
4. 모델(데이터)을 다수의 뷰가 공유하는 형태입니다.

### 3. 다중할일목록 <a href="#multiple-todos-mvc" id="multiple-todos-mvc">#</a>
1. [2. 할일목록](#todos-mvc)예제를 재활용합니다.
2. 기존 mvc 코드를 상속받거나 클래스 관계를 통해 구현합니다.

## 비교
### 모델 뷰 분리의 장점
모델과 뷰를 분리함으로서 뷰 변경시 모델의 정합성이 깨지는 문제를 방지할 수 있습니다. 마찬가지로 모델에 대한 변경이 뷰 구조에 의해 제약받는 일이 없게 됩니다.

모델 뷰 분리를 클래스(OOP)를 활용해 진행했습니다. OOP는 코드품질을 높이는, 가장 성숙한 방법론 중 하나입니다. 기존의 코드는 자바스크립트만으로 이해하기 어려웠습니다. 클래스를 활용하면 비교적 이해하기 쉬운, 가독성 높은 코드를 작성할 수 있습니다.

결론적으로 기능추가, 확장에 큰 이점을 얻을 수 있습니다.

### 단점
간단한 예제라 할 지라도 모델 뷰를 분리하며 개발하면 코드량이 늘어나고 개발시간도 상당히 늘어나게 됩니다. 또 모범사례가 적은, 다양한 상황을 마주하게 될 수 있으며 이 때마다 많은 고민과 경험을 요구받습니다.

## 결론
제이쿼리만으로 모델, 뷰를 분리하는 일은 너무 많은 시간을 소요합니다. 복잡하고 규모가 큰(프론트엔드 역할이 무거운) 프로젝트라면 최신의 뷰 프레임워크(react, vue, angular) 도입을 고려합니다. 간단한 웹사이트 개발이라면 모델,뷰 분리 없이 개발을 진행해도 무방할 것으로 생각됩니다. 

다소 복잡한 프로젝트를 최신 뷰 프레임워크 도입없이 개발해야 한다고 할 때에만 모델, 뷰를 분리하는 일을 고려합니다. 그러나 이 경우에도 예제와 같이 클래스를 활용해 모델, 뷰 분리하기 보다 아래와 같이 네임스페이스와 데이터속성(data-*)를 활용해 간단한 형태로 모델의 정합성만 유지하는 방법을 택하는 것이 좋다고 생각합니다. (프레임워크와 달리 강력한 규칙이 없어서 개발자 역량에 따라 코드품질이 심하게 달라지기 때문입니다. 개발속도도 매우 느려지며 경험상 백본을 써도 마찬가지입니다.)

```js
(function($){
    $.model = $.model || {};
    $.model.counter = {number:0};
    $.emitter = $.emiiter || $({});

    var $counter = $("#counter")
        .on("click", "[data-increment]", function(){
            $.model.counter.number++;
            $.emitter.trigger("COUNTER_INCREMENT");
        })
        .on("click", "[data-decrement]", function(){
            $.model.counter.number--;
            $.emitter.trigger("COUNTER_DECREMENT");
        });

    $.emitter.on("COUNTER_INCREMENT COUNTER_DECREMENT", function(){
        $counter.find("[data-number]").text($.model.counter.number);
    });
})($)
```